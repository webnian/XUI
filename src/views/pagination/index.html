<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>XUI框架</title>
		<meta http-equiv = "X-UA-Compatible" content = "IE=edge,chrome=1" />
		<meta name="keywords" content="XUI框架" />
		<meta name="description" content="XUI框架" />
		<meta name="renderer" content="webkit">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
		<link rel="shortcut icon" href="../assets/favicon.ico">
	</head>
	<body>
		<h2 class="font-size24 color-blue mb-20">pagination 分页</h2>
		<pre>
      pagination({
        el: $('.pagination1'),
        total: 20,	//总页数
        pageIndex: 2	//当前页
      })
		</pre>
		<div class="pagination1 pagination mb-20"></div>

		<pre>
      pagination({
        el: $('.pagination2'),
        total: 26,
        pageIndex: 19,
        jump: false,	//是否显示前往第几页
        prev: &lt;,
        next: &gt;,
        callback: function(n) {
          $pagination.find('p').text('当前第' + n + '页')
        }
      })
		</pre>
		<div class="pagination2 pagination mb-20"></div>
		<p></p>

		<pre>
      .pagination {
        height: 34px;
        line-height: 34px;
        overflow: hidden;
      }
      .pagination button, .pagination input {
        display: inline-block;
        height: 100%;
        vertical-align: top;
        box-sizing: border-box;
        border-radius: 3px;
      }
      .pagination button {
        background: #fff;
        outline: none;
        border: 1px solid #dfdfdf;
        padding: 0 12px;
        cursor: pointer;
        margin-right: 5px;
      }
      .pagination button[disabled]:hover {
        cursor: not-allowed;
        opacity: 0.6;
      }
      .pagination input {
        width: 50px;
        outline: none;
        padding: 0 5px;
        border: 1px solid #dfdfdf;
      }
      .pagination .active {
        background: #0ae;
        color: #fff;
      }
		</pre>

		<pre>
      function pagination(obj = {}) {
        var el = obj.el
        var total = obj.total || 0
        var pageIndex = obj.pageIndex || 1
        var jump = obj.jump == false ? false : true
        var prev = obj.prev || '上一页'
        var next = obj.next || '下一页'
        render()
        setupEvents()
        obj.setPage && obj.setPage()
        function render() {
          if (pageIndex &lt; 1) pageIndex = 1
          if (pageIndex &gt; total) pageIndex = total
          var str = pageIndex == 1 ? '&lt;button class="prev" disabled&gt;' + prev + '&lt;/button&gt;' : '&lt;button class="prev"&gt;' + prev + '&lt;/button&gt;'
          if (total &lt;= 7) {
            for (var i = 1; i &lt;= total; i++) {
              if (i == pageIndex) {
                str += '&lt;button class="active"&gt;' + i + '&lt;/button&gt;'
              } else {
                str += '&lt;button&gt;' + i + '&lt;/button&gt;'
              }
            }
          } else if (pageIndex &gt; 4 && pageIndex &lt; total - 3) {
            str += '&lt;button&gt;1&lt;/button&gt;&lt;button&gt;...&lt;/button&gt;'
            for (var i = pageIndex - 2; i &lt;= pageIndex + 2; i++) {
              if (i == pageIndex) {
                str += '&lt;button class="active"&gt;' + i + '&lt;/button&gt;'
              } else {
                str += '&lt;button&gt;' + i + '&lt;/button&gt;'
              }
            }
            str += '&lt;button&gt;...&lt;/button&gt;&lt;button&gt;' + total + '&lt;/button&gt;'
          } else if (pageIndex &lt;= 4) {
            for (var i = 1; i &lt;= 6; i++) {
              if (i == pageIndex) {
                str += '&lt;button class="active"&gt;' + i + '&lt;/button&gt;'
              } else {
                str += '&lt;button&gt;' + i + '&lt;/button&gt;'
              }
            }
            str += '&lt;button&gt;...&lt;/button&gt;&lt;button&gt;' + total + '&lt;/button&gt;'
          } else if (pageIndex &gt;= total - 3) {
            str += '&lt;button&gt;1&lt;/button&gt;&lt;button&gt;...&lt;/button&gt;'
            for (var i = total - 5; i &lt;= total; i++) {
              if (i == pageIndex) {
                str += '&lt;button class="active"&gt;' + i + '&lt;/button&gt;'
              } else {
                str += '&lt;button&gt;' + i + '&lt;/button&gt;'
              }
            }
          }

          str += pageIndex == total ? '&lt;button class="next" disabled&gt;' + next + '&lt;/button&gt;' : '&lt;button class="next"&gt;' + next + '&lt;/button&gt;'
          if (jump && total &gt; 7) {
            str += '前往 &lt;input type="text"/&gt; 页'
          }
          el.html(str)
          obj.callback && obj.callback(pageIndex)
          if (jump && total &gt; 7) {
            el.on('keydown', 'input', function(e) {
              if (e.keyCode == 13) {
                var str = $(this).val().trim() - 0
                if (str &gt; total) return $(this).val('')
                pageIndex = str
                render()
              }
            })

            el.on('input', 'input', function(e) {
              $(this).val($(this).val().replace(/[\D]/g, ''))
            })
          }
        }

        function setupEvents() {
          el.on('click', 'button', function() {
            if (!$(this).hasClass('prev') && !$(this).hasClass('next')) {
              if (pageIndex == $(this).text() || $(this).text() == '...') return
              pageIndex = ($(this).text() || 1) - 0
              render()
            } else if ($(this).hasClass('prev')) {
              pageIndex--
              render()
            } else if ($(this).hasClass('next')) {
              pageIndex++
              render()
            }
          })
        }
      }
		</pre>

		<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
	</body>
</html>
